.\" Text automatically generated by txt2man
.TH anything-sync-daemon 1 "20 December 2014" "" ""
.SH NAME
\fBanything-sync-daemon \fP- Symlinks and syncs user specified dirs to RAM thus reducing HDD/SDD calls and speeding-up the system.
\fB
.SH DESCRIPTION
Anything-sync-daemon (asd) is a tiny pseudo-daemon designed to manage user specified directories in tmpfs and to periodically sync them back to the physical disc (HDD/SSD). This is accomplished via a symlinking step and an innovative use of rsync to maintain back-up and synchronization between the two.
.PP
Design goals of asd:
.RS
.IP \(bu 3
Completely transparent user experience.
.IP \(bu 3
Reduced wear to physical discs (particularly SSDs).
.IP \(bu 3
Speed.
.RE
.PP
Since the target directories are relocated into tmpfs, the corresponding onslaught of I/O associated with system usage of them is also redirected from the physical disc to RAM, thus reducing wear to the physical disc and also improving speed and responsiveness. The access time of RAM is on the order of nanoseconds while the access time of physical discs is on the order of milliseconds. This is a difference of six orders of magnitude or 1,000,000 times faster.
.SH SETUP
/etc/asd.conf contains all user managed settings.
.PP
WARNING -- Do NOT change anything in /etc/asd.conf while asd is running since data loss may occur! Any edits made to the file while asd is running will be applied only after asd has been restarted from the init service.
.RS
.IP \(bu 3
At a minimum, define the target directory/directories to be managed by asd in the WHATTOSYNC array. Syntax below.
.IP \(bu 3
Optionally uncomment and define the location of your distro's tmpfs* in the VOLATILE variable.
.IP \(bu 3
Optionally enable the use of overlayfs to improve sync speed even further and use a smaller memory footprint. Do this in the USE_OVERLAYFS variable. Note that this option requires a Linux kernel version >=3.18.0. See the FAQ below for additional details on this feature.
.RE
.PP
*Note that the default value of "/dev/shm" should work just fine for the VOLATILE setting. Be sure to read the warning about using software such as bleachbit with asd since bleachbit likes to remove files stored in /tmp. This is why a value of /dev/shm is recommended.
.PP
Example:
.PP
.nf
.fam C
        WHATTOSYNC=('/var/lib/monitorix' '/srv/http' '/foo/bar')
        or
        WHATTOSYNC=(
        '/var/lib/monitorix'
        '/srv/http'
        '/foo/bar'
        )

.fam T
.fi
.SH RUNNING ASD
.SS PREVIEW MODE
The preview (parse) option can be called to show users exactly what asd will do based on the entries in /etc/asd.conf.
.PP
.nf
.fam C
 $ anything-sync-daemon parse
 or
 $ asd p

.fam T
.fi
.SS START AND STOP ASD FOR SYSTEMD USERS
Both a systemd service file and timer are provided, and should be used to interact with asd.
.PP
The role of the timer is update the tmpfs copies back to the disk. This occurs once per hour by default. The timer is started automatically with asd.service.
.PP
.nf
.fam C
 # systemctl [option] asd

.fam T
.fi
Available options:
.RS
.TP
.B
start
Turn on daemon.
.TP
.B
stop
Turn off daemon.
.TP
.B
enable
Autostart daemon on boot-up.
.TP
.B
disable
Don't autostart daemon on boot-up.
.SS  START AND STOP ASD FOR USERS OF OTHER INIT SYSTEMS
For distros not using systemd, another init script should be used to manage the daemon. An example is provided and is known to work with the following distros: Debian, Mint, and Ubuntu. Note that for these distros, the supplied cron script (installed to /etc/cron.hourly) will run the resync option to keep the tmpfs copies sync'ed. Of course, the target system must have cron installed and active for this to happen.
.PP
.nf
.fam C
 $ sudo /etc/init.d/asd [option]
 or
 $ sudo service asd [option]

.fam T
.fi
Available options:
.RS
.TP
.B
start
Turn on daemon.
.TP
.B
stop
Turn off daemon.
.RE
.PP
To have asd start/stop automatically, invoke update-rc.d:
.PP
.nf
.fam C
 $ sudo update-rc.d asd default

.fam T
.fi
To disable asd, invoke update-rc.d again:
.PP
.nf
.fam C
 $ sudo update-rc.d -f asd remove

.fam T
.fi
.SH CONTRIBUTE
Should you wish to contribute to this code, please fork and send a pull request. Source is freely available on github: https://github.com/graysky2/anything-sync-daemon
.SH BUGS
Currently, asd cannot handle open files on a sync target so if a hung process has something open there, it can be messy.c
.SH AUTHOR
graysky (graysky AT archlinux DOT us)
